<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Javascript tests</title>
        <link rel="stylesheet" href="qunit-2.20.0.css">
    </head>
    <body>
        <div id="qunit"></div>
        <div id="qunit-fixture">
            <form>
                <input name="text"/>
                <div class="has-error">Error text</div>
            </form>
        </div>


        <script src="qunit-2.20.0.js"></script>
        <script>
            // vars
            var errElement = document.getElementsByClassName('has-error')[0];
            var inputEl = document.getElementsByName('text')[0];
        </script>
        <script src="../lists.js"></script>
        <script>
            
            QUnit.test('errors should be hidden on keypress', (assert) => {
                window.SuperLists.initialize()
                inputEl.dispatchEvent(new KeyboardEvent('keypress'))
                assert.equal(
                    errElement.checkVisibility({checkOpacity: true, checkVisibilityCSS: true}),
                    false
                    )
                })

            QUnit.test("errors aren't hidden if there is no keypress", (assert) => {
                window.SuperLists.initialize()
                assert.equal(
                    errElement.checkVisibility({checkOpacity: true, checkVisibilityCSS: true}),
                    true
                )
            })
        </script>
    </body>
</html>